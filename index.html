<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kuray Tunc – HR Chatbot</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        margin: 0;
        background: linear-gradient(135deg, #0d1117, #1b2838);
        font-family: Arial, sans-serif;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .chat-container {
        width: 420px;
        height: 80vh;
        background: #161b22;
        border-radius: 14px;
        padding: 20px;
        box-shadow: 0 0 25px rgba(0,0,0,0.55);
        display: flex;
        flex-direction: column;
    }

    h2 {
        text-align: center;
        margin-bottom: 10px;
        color: #58a6ff;
    }

    #messages {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
        border-radius: 8px;
        background: #0d1117;
        margin-bottom: 12px;
    }

    .msg {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 8px;
        line-height: 1.4;
    }

    .user {
        background: #238636;
        text-align: right;
    }

    .bot {
        background: #30363d;
    }

    #inputBox {
        display: flex;
        gap: 10px;
    }

    #question {
        flex: 1;
        padding: 10px;
        border-radius: 6px;
        border: none;
        outline: none;
    }

    #sendBtn {
        background: #58a6ff;
        color: #000;
        border: none;
        padding: 10px 18px;
        border-radius: 6px;
        cursor: pointer;
    }

    #sendBtn:hover {
        background: #79c0ff;
    }
</style>
</head>

<body>

<div class="chat-container">
    <h2>Kuray Tunc – HR Assistant</h2>

    <div id="messages"></div>

    <div id="inputBox">
        <input id="question" placeholder="Ask a recruiter question...">
        <button id="sendBtn">Send</button>
    </div>
</div>

<script>
// BURASI ÖNEMLİ: Backend URL'ini buraya koyuyoruz
const API_URL = "https://kuray-chatbot.onrender.com/chat";

document.getElementById("sendBtn").onclick = sendMessage;
document.getElementById("question").addEventListener("keydown", function (e) {
    if (e.key === "Enter") sendMessage();
});

async function sendMessage() {
    const qInput = document.getElementById("question");
    const text = qInput.value.trim();
    if (!text) return;

    addMessage(text, "user");
    qInput.value = "";

    try {
        const resp = await fetch(API_URL, {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({question: text})
        });

        const data = await resp.json();
        addMessage(data.answer || "No answer field in response.", "bot");
    } catch (err) {
        addMessage("Error calling backend: " + err, "bot");
    }
}

function addMessage(text, sender) {
    const box = document.getElementById("messages");
    const msg = document.createElement("div");
    msg.className = "msg " + sender;
    msg.innerText = text;
    box.appendChild(msg);
    box.scrollTop = box.scrollHeight;
}
</script>

</body>
</html>
